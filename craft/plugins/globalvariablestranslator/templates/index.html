{% extends "_layouts/cp" %}
{% set title = "Global variables translator"|t %}
{% set globalSets = craft.globals.getEditableSets() %}
{% set globalSetId = globalSets[0].id %}

{% block pageTitle %}
	{{ parent() }}
{% endblock %}
{% set tabs = {
    recent: { label: "Recent"|t, url: url('cocktailrecipes') },
    new:    { label: "Add a New Recipe"|t, url: url('cocktailrecipes/new') }
} %}

{% block sidebar %}
	<nav>
		<ul>
			{% for theGlobalSet in globalSets %}
				<li><a href="/admin/globalvariablestranslator/{{ theGlobalSet.id }}">{{ theGlobalSet.name|t }}</a></li>
			{% endfor %}
		</ul>
	</nav>
{% endblock %}
{% block content %}
<style type="text/css">
	form {
		width: 25%;
		margin-right: 5%;
		float: left;
		margin-bottom: 5em;
	}
</style>
{% for locale in craft.i18n.getSiteLocales()%}
	{% set globalSet = craft.globals.getSetById( globalSetId, locale.id ) %}

	<form method="post" accept-charset="UTF-8" data-saveshortcut data-confirm-unload >
		<input type="hidden" name="action" value="globals/saveContent">
		<input type="hidden" name="setId" value="{{ globalSet.id }}">
		<input type="hidden" name="locale" value="{{ locale.id }}">
		{{ getCsrfInput() }}
		{% if globalSet.getFieldLayout().getFields() | length %}
			{% set fields = globalSet.getFieldLayout().getFields() %}
			<div>
				<h2>{{ locale.name }}</h2>
				{% include "_includes/fields" with {
				    fields: globalSet.getFieldLayout().getFields(),
				    element: globalSet
				} only %}
				{#{% for field in fields %}
					{% if field.field.fieldType.name == "Rich Text" %}
						{{ field.field.name}}
						<p>This is a Richt Text field. You have to set this in the tab "Globals".</p>
					{% else %}
						{% set input = craft.fields.getFieldById(field.fieldId) %}
						{% include "_includes/field" with {
						    field: input,
						    required: false
						} only %}
					{% endif %}
				{% endfor %}#}
			</div>

			<div class="buttons">
				<input type="submit" class="btn submit" value="{{ 'Save'|t }}">
			</div>
		{% else %}
			{{ "This global set doesnâ€™t have any fields assigned to it in its field layout."|t }}
		{% endif %}
	</form>
{% endfor %}
	
{% endblock %}